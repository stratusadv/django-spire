{% extends 'django_spire/filtering/form/base_session_filter_form.html' %}

{% load session_tags %}

{% block session_filter_key %}{{ filter_session.session_key }}{% endblock %}

{% block filter_content %}
    <div
        class="row g-2 mb-2"
        x-data="{
            infinite_scrolling: new ModelObjectGlue('infinite_scrolling'),
            search_field: new GlueCharField(
                'search',
                {
                    value: '{{ filter_session.search|default:"" }}',
                    label: 'Search',
                    name: 'search',
                }
            ),
            session_controller: new SessionController('{% session_controller_to_json filter_session.session_key %}'),

            async init() {
                await this.infinite_scrolling.get();

                this.search_field.set_attribute('placeholder', 'Search...')
            },
        }"
    >
        <div class="col-6">
            {% include 'django_glue/form/field/char_field.html' with glue_field='search_field' %}
        </div>
    </div>
{% endblock %}
